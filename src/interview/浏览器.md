# XSS 攻击(跨站脚本)

全称是 Cross Site Scripting。是指浏览器中执行恶意脚本(无论是跨域还是同域)，从而拿到用户的信息并进行操作。

实现：

- 存储型。常见例子在留言评论区提交一段脚本代码，如果前后端没有做好转义的工作，那评论内容存到了数据库，在页面渲染过程中`直接执行`

- 反射型。通过作为网络请求的参数，经过服务器，然后再反射到 HTML 文档中，执行解析。
- 文档型。作为中间人的角色，在数据传输过程劫持到网络数据包，然后**修改里面的 html 文档**！

防范：

- 一个信念: 不要相信用户的输入，对输入内容转码或者过滤，让其不可执行。
- 两个利用:
  1. 利用 CSP（浏览器中的内容安全策略）
     - 限制其他域下的资源加载。
     - 禁止向其它域提交数据。
     - 提供上报机制，能帮助我们及时发现 XSS 攻击。
  2. 利用 Cookie 的 HttpOnly 属性。
     - 很多 XSS 攻击脚本都是用来窃取 Cookie, 而设置 Cookie 的 HttpOnly 属性后，JavaScript 便无法读取 Cookie 的值。这样也能很好的防范 XSS 攻击。

# CSRF 攻击(跨站请求伪造)

全称是 Cross-site request forgery。是指利用服务器的验证漏洞和**用户之前的登录状态**来模拟用户进行操作

实现：

- 自动 GET 请求
- 自动 POST 请求
- 诱导点击发送 GET 请求。

防范：

- 利用 Cookie 的 SameSite 属性。其可以设置三个值，当设置 Strict 时，完全禁止第三方请求携带 Cookie，只允许相同站点下才能携带 Cookie。

- 验证来源站点，Origin 只包含域名信息，Referer 包含具体的 URL 路径，但两者都可在请求时伪造。
- 携带 Token
