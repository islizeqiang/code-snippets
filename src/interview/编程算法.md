## 在输入框中如何判断输入的是一个正确的网址

```js
function isUrl(url) {
  try {
    new URL(url);
    return true;
  } catch (err) {
    return false;
  }
}
```

## 找出字符串中连续出现最多的字符和个数

```js
// 找出字符串中连续出现最多的字符和个数
// 'abcaakjbb' => {'a':2,'b':2}
// 'abbkejsbcccwqaa' => {'c':3}

const str = 'abcaakjbb';

const arr = str.match(/(\w)\1*/g);
const maxLen = Math.max(...arr.map((s) => s.length));
const result = arr.reduce((acc, curr) => {
  if (curr.length === maxLen) {
    acc[curr[0]] = curr.length;
  }
  return acc;
}, {});

console.log(result);
```

```js
const str = 'abcaaakjbb';
console.log('aaasdofjaopfjopaiiisjssfopiasdfffff'.match(/(.)\1+/g));

const arr = str.match(/(.)\1+/g);
console.log('arr: ', arr);

const xx = arr.sort((a, b) => b.length - a.length)[0];
console.log('xx: ', xx);

const x = {
  [xx.slice(0, 1)]: xx.length,
};

console.log('x: ', x);
```

## 根据以下要求，写一个数组去重函数

```js
const jsonable = (item) => item === undefined || typeof item === 'symbol';

const comparable = (item) => {
  if (!jsonable(item)) {
    return item;
  }
  if (item.constructor === Object) {
    return Object.keys(item)
      .sort()
      .reduce((acc, cur) => {
        acc[cur] = comparable(item[cur]);
        return acc;
      }, {});
  }
  if (item.constructor === Array) {
    return item.map(comparable);
  }
  return item;
};

const x = { a: { x: [222], b: 1 }, x: undefined };
const y = { a: { b: 1, x: [222, { NAME: 22 }] }, x: undefined };
const xx = undefined;
const yy = undefined;

const unique = (arr) =>
  Array.from(
    new Set(arr.map((item) => (jsonable(item) ? item : JSON.stringify(comparable(item))))),
  ).map((item) => (jsonable(item) ? item : JSON.parse(item)));

console.log(unique([x, y, xx, yy]));
```

## 请把俩个数组 [A1, A2, B1, B2, C1, C2, D1, D2] 和 [A, B, C, D]，合并为 [A1, A2, A, B1, B2, B, C1, C2, C, D1, D2, D]

```js
let a1 = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2', 'D1', 'D2'];
let a2 = ['A', 'B', 'C', 'D'].map((item) => {
  return item + 3;
});

let a3 = [...a1, ...a2].sort().map((item) => {
  if (item.includes('3')) {
    return item.split('')[0];
  }
  return item;
});
```

## 算法题红黄蓝球问题

在一个字符串数组中有红、黄、蓝三种颜色的球，且个数不相等、顺序不一致，请为该数组排序。使得排序后数组中球的顺序为:黄、红、蓝。

例如：红蓝蓝黄红黄蓝红红黄红，排序后为：黄黄黄红红红红红蓝蓝蓝。

```typescript
/**
 * 根据order的顺序对数据排序
 * @param arr 排序数组
 * @param order 排序内容order
 */
const cunstomSort1 = <T>(arr: Array<T>, order: Array<any>): Array<T> =>
  arr.sort((a, b) => order.indexOf(a) - order.indexOf(b));

function cunstomSort<T>(arr: Array<T>, order: Array<any>): Array<T> {
  return arr.sort((a, b) => order.indexOf(a) - order.indexOf(b));
}

console.log(cunstomSort('红蓝蓝黄红黄蓝红红黄红'.split(''), ['黄', '红', '蓝']));
```

## 如何把一个字符串的大小写取反（大写变小写小写变大写），例如 ’AbC' 变成 'aBc'

```js
const processString = (str) => {
  const arr = str.split('');
  const newArr = arr.map((item) =>
    item === item.toUpperCase() ? item.toLowerCase() : item.toUpperCase(),
  );
  return newArr.join('');
};

console.log(processString('AbC'));
```

## 算法题「旋转数组」

> 给定一个数组，将数组中的元素向右移动 k 个位置，其中 k 是非负数。

示例 1：

```json
输入: [1, 2, 3, 4, 5, 6, 7] 和 k = 3
输出: [5, 6, 7, 1, 2, 3, 4]
解释:
向右旋转 1 步: [7, 1, 2, 3, 4, 5, 6]
向右旋转 2 步: [6, 7, 1, 2, 3, 4, 5]
向右旋转 3 步: [5, 6, 7, 1, 2, 3, 4]
```

示例 2：

```json
输入: [-1, -100, 3, 99] 和 k = 2
输出: [3, 99, -1, -100]
解释:
向右旋转 1 步: [99, -1, -100, 3]
向右旋转 2 步: [3, 99, -1, -100]
```

```js
const moveArr = (arr, k) => arr.splice(-k % arr.length).concat(arr);

console.log(moveArr([1, 2, 3, 4, 5, 6, 7], 2));
```

## 格式化金钱，每千分位加逗号

```js
function format(str) {
  let s = '';
  let count = 0;
  for (let i = str.length - 1; i >= 0; i--) {
    s = str[i] + s;
    count++;
    if (count % 3 == 0 && i != 0) {
      s = ',' + s;
    }
  }
  return s;
}
function format(str) {
  return str.replace(/(\d)(?=(?:\d{3})+$)/g, '$1,');
}
```

## 去除所有空格

```js
str.replace(/\s/g, '');
```

## 去除两边空格

```js
str.replace(/^\s+|\s+$/g, '');
// 原生方法
str.trim();
```

## 实现一个 sleep 函数，比如 sleep(1000) 意味着等待 1000 毫秒，可从 Promise、Generator、Async/Await 等角度实现

4 种方式：

```js
//Promise
const sleep = (time) => {
  return new Promise((resolve) => setTimeout(resolve, time));
};
sleep(1000).then(() => {
  console.log(1);
});

//Generator
function* sleepGenerator(time) {
  yield new Promise(function (resolve, reject) {
    setTimeout(resolve, time);
  });
}
sleepGenerator(1000)
  .next()
  .value.then(() => {
    console.log(1);
  });

//async
function sleep(time) {
  return new Promise((resolve) => setTimeout(resolve, time));
}
async function output() {
  let out = await sleep(1000);
  console.log(1);
  return out;
}
output();

//ES5
function sleep(callback, time) {
  if (typeof callback === 'function') setTimeout(callback, time);
}

function output() {
  console.log(1);
}
sleep(output, 1000);
```

## 实现 (5).add(3).minus(2) 功能

```js
Number.prototype.add = function (n) {
  return this.valueOf() + n;
};
Number.prototype.minus = function (n) {
  return this.valueOf() - n;
};
console.log('(5).add(3).minus(2): ', (5).add(3).minus(2));
```

## 常见异步笔试题

因为 async await 本身就是 promise+generator 的语法糖。所以 await 后面的代码是 microtask。

```js
async function async1() {
  console.log('async1 start');
  await async2();
  console.log('async1 end');
}
async function async2() {
  console.log('async2');
}
console.log('script start');
setTimeout(function () {
  console.log('setTimeout');
}, 0);
async1();
new Promise(function (resolve) {
  console.log('promise1');
  resolve();
}).then(function () {
  console.log('promise2');
});
console.log('script end');
```

#### 变式一

```js
async function async1() {
  console.log('async1 start');
  await async2();
  console.log('async1 end');
}
async function async2() {
  //async2做出如下更改：
  new Promise(function (resolve) {
    console.log('promise1');
    resolve();
  }).then(function () {
    console.log('promise2');
  });
}
console.log('script start');

setTimeout(function () {
  console.log('setTimeout');
}, 0);
async1();

new Promise(function (resolve) {
  console.log('promise3');
  resolve();
}).then(function () {
  console.log('promise4');
});

console.log('script end');
```

#### 变式二

```js
async function async1() {
  console.log('async1 start');
  await async2();
  //更改如下：
  setTimeout(function () {
    console.log('setTimeout1');
  }, 0);
}
async function async2() {
  //更改如下：
  setTimeout(function () {
    console.log('setTimeout2');
  }, 0);
}

console.log('script start');

setTimeout(function () {
  console.log('setTimeout3');
}, 0);
async1();

new Promise(function (resolve) {
  console.log('promise1');
  resolve();
}).then(function () {
  console.log('promise2');
});
console.log('script end');
```

#### 变式三

```js
async function a1() {
  console.log('a1 start');
  await a2();
  console.log('a1 end');
}
async function a2() {
  console.log('a2');
}

console.log('script start');

setTimeout(() => {
  console.log('setTimeout');
}, 0);

Promise.resolve().then(() => {
  console.log('promise1');
});

a1();

let promise2 = new Promise((resolve) => {
  resolve('promise2.then');
  console.log('promise2');
});

promise2.then((res) => {
  console.log(res);
  Promise.resolve().then(() => {
    console.log('promise3');
  });
});
console.log('script end');
```

```js
str.replace(/^\s+|\s+$/g, '');
// 原生方法
str.trim();
```
